<properties
   pageTitle="Microsoft Antimalware per i servizi Cloud Azure e macchine virtuali | Microsoft Azure"
   description="In questo articolo viene fornita una panoramica dell'architettura di Microsoft Antimalware per Azure, inclusi gli scenari supportati e le configurazioni per abilitazione, configurazione e distribuzione di protezione per servizi Cloud Windows Azure e macchine virtuali. Verranno illustrate le caratteristiche configurazione di base, gestione e il monitoraggio delle funzionalità accessibile tramite Microsoft Azure gestione API, gli script di PowerShell, il portale di Azure e Visual Studio."
   services="security"
   documentationCenter="na"
   authors="YuriDio"
   manager="swadhwa"
   editor=""/>

<tags
   ms.service="security"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/19/2016"
   ms.author="yurid"/>

#<a name="microsoft-antimalware-for-azure-cloud-services-and-virtual-machines"></a>Microsoft Antimalware per i servizi Cloud Azure e macchine virtuali

Il paesaggio moderna, ideale per gli ambienti cloud è estremamente dinamico, aumentando la pressione Business IT cloud gli abbonati a mantenere la protezione efficace per soddisfare i requisiti di sicurezza e conformità. Microsoft Antimalware per servizi Cloud Windows Azure e macchine virtuali è la funzionalità di protezione in tempo reale gratuito che consente di individuare e rimuovere virus, spyware e altro software dannoso, con configurabili avvisi quando noto software dannoso o indesiderato tenta di installare stesso o eseguire sui sistemi Azure.

La soluzione è basata sulla stessa piattaforma di antimalware Microsoft Security Essentials \[MSE\], Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Windows Intune e Windows Defender per Windows 8.0 e versioni successive. Microsoft Antimalware per Azure è una soluzione single-agent per applicazioni e ambienti tenant, progettati per l'esecuzione in background senza intervento. È possibile distribuire la protezione in base alle esigenze dei carichi di lavoro applicazione, con una base sicura-per impostazione predefinita o configurazione personalizzata, inclusi il monitoraggio antimalware avanzata.

Quando si distribuisce e Abilita Antimalware Microsoft per Azure per le applicazioni, sono disponibili le seguenti caratteristiche principali:

- **Protezione in tempo reale** - Monitor attività nei servizi Cloud e in macchine virtuali per rilevare e bloccare l'esecuzione di software dannoso.
- **Programmata la scansione** - periodicamente esegue la scansione target per rilevare software dannoso, inclusi in esecuzione programmi.
- **Monitoraggio e aggiornamento di software dannoso** , viene inserito automaticamente azione malware rilevato, ad esempio l'eliminazione o la messa in quarantena file dannosi e pulizia le voci del Registro di sistema dannoso.
- **Gli aggiornamenti della firma** - installa automaticamente le firme di protezione più recenti (definizioni di virus) per garantire la protezione sia aggiornata su una frequenza predeterminata.
- **Gli aggiornamenti del motore Antimalware** -Aggiorna automaticamente il modulo Microsoft Antimalware.
- **Aggiornamenti di piattaforma Antimalware** -verrà aggiornato automaticamente la piattaforma Microsoft Antimalware.
- **Attiva protezione** - report telemetria metadati sulle minacce rilevate e risorse sospette a Microsoft Azure per garantire risposta rapida per l'evoluzione paesaggio, nonché per consentire il recapito di firma icona in tempo reale tramite Microsoft Attiva protezione sistema (mappe).
- **Esempi di creazione di report** - fornisce i report ed esempi al servizio Microsoft Antimalware per perfezionare il servizio e abilitare la risoluzione dei problemi.
- **Esclusioni** : consente di applicazione e gli amministratori del servizio configurare alcuni file, processi e unità escluderli da protezione e l'analisi per prestazioni e/o altri motivi.
- **La raccolta degli eventi Antimalware** : vengono registrate antimalware integrità dei servizi, verificare l'affidabilità le attività le azioni di correzione eseguite nel registro eventi di sistema operativo e consente di raccogliere in considerazione lo spazio di archiviazione di Azure del cliente.

> [AZURE.NOTE] Microsoft Antimalware possono anche essere distribuiti utilizzando il Centro protezione di Azure. Per ulteriori informazioni, vedere [Installare Endpoint Protection in Centro protezione di Azure](../security-center/security-center-install-endpoint-protection.md) . 

##<a name="architecture"></a>Architettura

Antimalware Microsoft per servizi Cloud Windows Azure e macchine virtuali di soluzione include la Microsoft Antimalware Client e il servizio, modello di distribuzione classica Antimalware, i cmdlet di Antimalware PowerShell e Azure diagnostica estensione. La soluzione Microsoft Antimalware è supportata in Windows Server 2008 R2, Windows Server 2012 e famiglie di sistemi operativi Windows Server 2012 R2. Non è supportato nel sistema operativo Windows Server 2008. Al momento non è supportato in Windows Server Technical Preview e si intende supportare in futuro.

Per impostazione predefinita in uno stato disabilitato in tutte le famiglie di sistemi operativi supportati guest Azure della piattaforma di servizi Cloud è installato il Client Antimalware Microsoft e servizio. Microsoft Antimalware Client e servizio non è installato per impostazione predefinita della piattaforma macchine virtuali ed è disponibile come funzione facoltativa tramite il portale di Azure e la configurazione di Visual Studio Virtual Machine in estensioni di protezione.

Quando si usano siti Web di Azure, Antimalware Microsoft è stato attivato il servizio sottostante che ospita l'applicazione web. Viene utilizzato per la protezione dell'infrastruttura di siti Web di Azure e non viene eseguito sul contenuto dei clienti. 


###<a name="microsoft-antimalware-workflow"></a>Flusso di lavoro di Microsoft antimalware

L'amministratore del servizio Azure può abilitare Antimalware per Azure con una configurazione predefinita o personalizzata per macchine virtuali e servizi Cloud usando le opzioni seguenti:

-   Macchine virtuali: nel portale di Azure, in **Estensioni di protezione**

-   Macchine virtuali – utilizzando la configurazione di macchine virtuali di Visual Studio in Esplora Server

-   Macchine virtuali e servizi Cloud – utilizzando il [modello di distribuzione classica](https://msdn.microsoft.com/library/azure/ee460799.aspx) di Antimalware

-   Macchine virtuali e servizi Cloud – cmdlet tramite Antimalware PowerShell

Il portale di Azure e i cmdlet di PowerShell push il file di pacchetto dell'estensione Antimalware al sistema di Azure in una posizione fissa predeterminato. L'agente di Guest Azure (o agente di tessuti) avvia l'estensione Antimalware, applicare le impostazioni di configurazione Antimalware fornite come input. Questo passaggio consente al servizio Antimalware con predefiniti o impostazioni di configurazione personalizzate. Se nessuna configurazione personalizzata, il servizio antimalware è compatibile con le impostazioni di configurazione predefinite. Vedere la sezione *configurazione Antimalware* [Antimalware Microsoft per servizi Cloud Windows Azure e macchine virtuali: esempi di codice](http://aka.ms/amazsamples "Antimalware per Azure servizi Cloud Microsoft ed esempi di codice macchine virtuali") per altri dettagli.

Una volta in esecuzione, il client Microsoft Antimalware Scarica le ultime definizioni motore e nella firma di protezione da Internet e carica nel sistema di Azure. Il servizio Microsoft Antimalware scrive eventi relativi al servizio nel Registro di sistema operativo eventi in origine dell'evento "Microsoft Antimalware". Eventi includono lo stato di integrità client Antimalware, protezione e monitoraggio e aggiornamento dello stato, le impostazioni di configurazione vecchi e nuovi, gli aggiornamenti del motore e le definizioni di firma e ad altri utenti.

È possibile abilitare Antimalware monitoraggio per il servizio Cloud o la macchina virtuale per gli eventi di registro eventi Antimalware scritti quando vengono generati al proprio account di archiviazione Azure. Antimalware Service utilizza l'estensione di Azure diagnostica per raccogliere gli eventi Antimalware dal sistema Azure nelle tabelle di account di archiviazione Azure del cliente.

Il flusso di lavoro di distribuzione inclusi passaggi di configurazione e opzioni è supportate per gli scenari sopra indicati nella sezione [Antimalware scenari](#_Antimalware_Deployment_Scenarios) di questo documento.

![Microsoft Antimalware in Azure](./media/azure-security-antimalware/sec-azantimal-fig1.PNG)

> [AZURE.NOTE] È tuttavia possibile utilizzare Powershell/API e modelli di gestione di risorse Azure per distribuire macchina virtuale scala set con estensione Microsoft Anti-Malware.  Per l'installazione di un'estensione in un computer virtuale già in esecuzione, è possibile utilizzare l' esempio di script python *vmssextn.py* trova [qui](https://github.com/gbowerman/vmsstools). Questo script ottiene la configurazione di estensione esistente nel Set di scala e aggiunge un'estensione all'elenco di estensioni esistenti nel set di scala di macchine Virtuali.

###<a name="default-and-custom-antimalware-configuration"></a>Configurazione predefinita e Antimalware personalizzato

Per attivare Antimalware per servizi Cloud Windows Azure o macchine virtuali quando non si fornisce le impostazioni di configurazione personalizzati vengono applicate le impostazioni di configurazione predefinite. Impostazioni di configurazione predefinite sono state pre-ottimizzate per l'esecuzione nell'ambiente di Azure. Facoltativamente, è possibile personalizzare le impostazioni di configurazione predefinite necessarie per l'applicazione Azure o la distribuzione del servizio e applicarli per altri scenari di distribuzione.

> [AZURE.NOTE] Per impostazione predefinita che è disabilitato l'interfaccia utente di Microsoft Antimalware nella gestione di risorse di Azure, file [cleanuppolicy.xml](https://blogs.msdn.microsoft.com/azuresecurity/2016/02/24/update-on-microsoft-antimalware-and-azure-resource-manager-arm-vms/) per ignorare questo messaggio di errore non è supportato. Per informazioni su come creare un criterio personalizzato, leggere [Per consentire di interfaccia utente di Microsoft Antimalware nella distribuzione di Azure risorsa Manager macchine virtuali Post](https://blogs.msdn.microsoft.com/azuresecurity/2016/03/09/enabling-microsoft-antimalware-user-interface-post-deployment/). 

Nella tabella seguente sono riepilogate le impostazioni di configurazione per il servizio Antimalware. Impostazioni di configurazione predefinite sono contrassegnate nella colonna denominata "Predefinito" riportata di seguito.

![Tabella 1](./media/azure-security-antimalware/sec-azantimal-tb18.PNG)

##<a name="antimalware-deployment-scenarios"></a>Scenari di distribuzione antimalware

In questa sezione vengono descritti gli scenari per abilitare e configurare antimalware, inclusi il monitoraggio di servizi Cloud Windows Azure e macchine virtuali.

###<a name="virtual-machines---enable-and-configure-antimalware"></a>Macchine virtuali - abilitare e configurare antimalware

**Distribuzione nel portale di Azure**

Per attivare il servizio Antimalware, fare clic su **Aggiungi** nella e estensioni, selezionare **Microsoft Antimalware** e il nuovo delle risorse, fare clic su **Crea** in e il Antimalware Microsoft. Fare clic su **Crea** senza immettere i valori di configurazione per abilitare Antimalware con le impostazioni predefinite o immettere le impostazioni di configurazione Antimalware per la macchina virtuale configurato come illustrato nella figura 2. Vedere **le descrizioni comandi** fornito con le impostazioni di configurazione della e Aggiungi estensione per visualizzare i valori di configurazione supportata.

![Impostazioni di configurazione macchina virtuale per Microsoft Antimalware](./media/azure-security-antimalware/sec-azantimal-fig2.PNG)

**Distribuzione tramite il portale classico Azure**

Per abilitare e configurare Microsoft Antimalware per macchine virtuali di Azure tramite il portale di Azure durante il provisioning di una macchina virtuale, seguire la procedura seguente:

1 accedere al portale di Azure <all'https://portal.azure.com>

2. per creare una nuova macchina virtuale, fare clic su **Nuovo**, **calcolare**, **Virtual** **Machine**, **Dalla raccolta** (non utilizzare Creazione rapida) come illustrato di seguito:

![Nuova macchina virtuale](./media/azure-security-antimalware/sec-azantimal-fig3.PNG)


3. selezionare l'immagine di **Microsoft Windows Server** nella pagina **Seleziona un'immagine** .

4. fare clic sulla freccia a destra e la configurazione delle macchine virtuali di input.

5. deselezionare la casella di controllo di **Microsoft Antimalware** in **Estensioni di protezione** nella pagina di configurazione della macchina virtuale.

6. fare clic sul pulsante Invia per abilitare e configurare Microsoft Antimalware per macchine virtuali di Azure con le impostazioni di configurazione predefinite.

![Configurazione della macchina virtuale](./media/azure-security-antimalware/sec-azantimal-fig4.PNG)

**Distribuzione mediante la configurazione di macchina virtuale Visual Studio**

Per abilitare e configurare il servizio Microsoft Antimalware utilizzando Visual Studio:

1. connettersi a Microsoft Azure in Visual Studio.

2. scegliere la macchina virtuale nel nodo **macchine virtuali** in **Esplora Server**

![Configurazione delle macchine virtuali in Visual Studio](./media/azure-security-antimalware/sec-azantimal-fig5.PNG)

3. destra fare clic su **Configura** per visualizzare la pagina di configurazione macchina virtuale

4 selezionare **Microsoft Antimalware** estensione dall'elenco a discesa in **Estensioni installate** e fare clic su **Aggiungi** per configurare con configurazione antimalware predefinita.

![Estensioni installate](./media/azure-security-antimalware/sec-azantimal-fig6.PNG)

5 per personalizzare la configurazione di Antimalware predefinita, selezionare (evidenziare) il Antimalware estensione nell'elenco di estensioni installate e fare clic su **Configura**.

6 sostituire la configurazione di Antimalware predefinita con configurazione personalizzata in formato JSON supportato nella casella di testo **configurazione pubblica** e fare clic su OK.

7 fare clic sul pulsante **Aggiorna** per inviare gli aggiornamenti di configurazione di macchina virtuale.

![Estensione di configurazione della macchina virtuale](./media/azure-security-antimalware/sec-azantimal-fig7.PNG)

**Nota:** La configurazione le macchine virtuali di Visual Studio per Antimalware supporta solo la configurazione formato JSON. Il modello di impostazioni di configurazione Antimalware JSON è incluso in [Antimalware per Azure servizi Cloud Microsoft e macchina virtuale - esempi di codice](http://aka.ms/amazsamples "Antimalware per Azure servizi Cloud Microsoft e macchina virtuale - esempi di codice"), che mostra le impostazioni di configurazione Antimalware supportate.

**Cmdlet per la distribuzione tramite PowerShell**

Abilitare e configurare Microsoft Antimalware per Azure macchine virtuali di uso dei cmdlet di PowerShell un'applicazione Azure o servizi.

Per abilitare e configurare Microsoft antimalware uso dei cmdlet di PowerShell antimalware:

1. Configurare l'ambiente di PowerShell, fare riferimento alla documentazione di <https://github.com/Azure/azure-powershell>

2. Utilizzare il cmdlet Set-AzureVMMicrosoftAntimalwareExtension Antimalware per attivare e configurare Antimalware Microsoft per la macchina virtuale come <http://msdn.microsoft.com/library/azure/dn771718.aspx>

**Nota:** La configurazione di macchine virtuali di Azure per Antimalware supporta solo la configurazione formato JSON. Il modello di impostazioni di configurazione Antimalware JSON è incluso in [Antimalware per Azure servizi Cloud Microsoft e macchina virtuale - esempi di codice](http://aka.ms/amazsamples "Antimalware per Azure servizi Cloud Microsoft e macchina virtuale - esempi di codice"), che mostra le impostazioni di configurazione Antimalware supportate.

###<a name="enable-and-configure-antimalware-using-powershell-cmdlets"></a>Cmdlet per abilitare e configurare Antimalware tramite PowerShell

Un'applicazione Azure o servizi possono abilitare e configurare Microsoft Antimalware per servizi Cloud Windows Azure uso dei cmdlet di PowerShell. Si noti che Microsoft Antimalware sia installato nello stato disabilitato della piattaforma di servizi Cloud e richiede un'azione a un'applicazione Azure per attivarlo.

Per abilitare e configurare Microsoft Antimalware uso dei cmdlet di PowerShell:

1.  Configurare l'ambiente di PowerShell, fare riferimento alla documentazione di <https://github.com/Azure/azure-sdk-tools#get-started>

2.  Utilizzare il cmdlet Set-AzureServiceAntimalwareExtension Antimalware per attivare e configurare Antimalware Microsoft per il servizio Cloud come <http://msdn.microsoft.com/library/azure/dn771718.aspx>

Il modello di impostazioni di configurazione Antimalware XML è incluso in [Antimalware per Azure servizi Cloud Microsoft e macchina virtuale - esempi di codice](http://aka.ms/amazsamples "Antimalware per Azure servizi Cloud Microsoft e macchina virtuale - esempi di codice"), che mostra le impostazioni di configurazione Antimalware supportate.

###<a name="cloud-services-and-virtual-machines---configuration-using-powershell-cmdlets"></a>Servizi e macchine virtuali - cmdlet per la configurazione con PowerShell cloud

Un'applicazione Azure o servizi possono recuperare la configurazione di Microsoft Antimalware per servizi Cloud e macchine virtuali di uso dei cmdlet di PowerShell.

Per recuperare la configurazione di Microsoft Antimalware uso dei cmdlet di PowerShell:

1.  Configurare l'ambiente di PowerShell, fare riferimento alla documentazione di <https://github.com/Azure/azure-sdk-tools#get-started>

2.  **Per macchine virtuali**: utilizzare il cmdlet Get-AzureVMMicrosoftAntimalwareExtension Antimalware per ottenere la configurazione antimalware come <http://msdn.microsoft.com/library/azure/dn771719.aspx>

3.  **Per i servizi Cloud**: utilizzare il cmdlet Get-AzureServiceAntimalwareConfig Antimalware per ottenere la configurazione Antimalware come <http://msdn.microsoft.com/library/azure/dn771722.aspx>

###<a name="remove-antimalware-configuration-using-powershell-cmdlets"></a>Rimuovere i cmdlet Antimalware configurazione tramite PowerShell

Un'applicazione Azure o servizi possono rimuovere la configurazione Antimalware e qualsiasi configurazione di monitoraggio Antimalware associata da pertinenti Azure Antimalware e diagnostica estensioni del servizio associate al servizio Cloud o la macchina virtuale.

Per rimuovere Microsoft Antimalware uso dei cmdlet di PowerShell:

1.  Configurare l'ambiente di PowerShell, fare riferimento alla documentazione di <https://github.com/Azure/azure-sdk-tools#get-started>

2.  **Per macchine virtuali**: utilizzare il cmdlet Antimalware Rimuovi AzureVMMicrosoftAntimalwareExtension come <http://msdn.microsoft.com/library/azure/dn771720.aspx>

3.  **Per i servizi Cloud:** Utilizzare il cmdlet Antimalware Rimuovi AzureServiceAntimalwareExtension come <http://msdn.microsoft.com/library/azure/dn771717.aspx>

Per **abilitare** la raccolta degli eventi antimalware per una macchina virtuale tramite il portale di anteprima Azure:

1.  Fare clic su qualsiasi parte dell'obiettivo monitoraggio in e il computer virtuale

2.  Scegliere il comando diagnostica blade metriche

3.  Selezionare **lo stato** via e selezionare l'opzione per il sistema di eventi di Windows 
4.  . È possibile deselezionare tutte le altre opzioni nell'elenco o tenuti abilitato per le esigenze di servizio dell'applicazione.

4.  Le categorie di eventi Antimalware "Errore", "Avviso", "Informativo" e così via, vengono acquisite nell'account di archiviazione Azure.

Eventi antimalware sono stati raccolti dal Registro di sistema di eventi di Windows al proprio account di archiviazione Azure. È possibile configurare l'Account di archiviazione per la macchina virtuale raccogliere gli eventi Antimalware selezionando l'account di archiviazione appropriato.

![Metrica e diagnostica](./media/azure-security-antimalware/sec-azantimal-fig8.PNG)

> [AZURE.NOTE] Per ulteriori informazioni sulla registrazione diagnostica per Antimalware Azure, leggere [l'Abilitazione della registrazione diagnostica per Antimalware Azure](https://blogs.msdn.microsoft.com/azuresecurity/2016/04/19/enabling-diagnostics-logging-for-azure-antimalware/).

###<a name="enable-and-configure-antimalware-monitoring-using-powershell-cmdlets"></a>Abilitare e configurare il monitoraggio antimalware utilizzando i cmdlet di powerShell

È possibile abilitare insieme di eventi Antimalware Microsoft per il servizio Cloud o la macchina virtuale utilizzando diagnostica Azure tramite i cmdlet di Antimalware PowerShell. L'estensione di Azure diagnostica può essere configurato per acquisire gli eventi dell'origine di registro eventi di sistema "Microsoft Antimalware" al proprio account di archiviazione Azure. Le categorie di eventi Antimalware "Errore", "Avviso", "Informativo" e così via, vengono acquisite nell'account di archiviazione Azure.

Per abilitare la raccolta degli eventi Antimalware al proprio account di archiviazione Azure uso dei cmdlet di PowerShell:

1.  Configurare l'ambiente di PowerShell - fanno riferimento a <https://github.com/Azure/azure-sdk-tools#get-started>

2.  **Per macchine virtuali** , utilizzare il cmdlet Set-AzureVMMicrosoftAntimalwareExtension Antimalware con l'opzione di monitoraggio via come documentazione al <http://msdn.microsoft.com/library/azure/dn771716.aspx>

3.  **Per i servizi Cloud** - utilizzare il cmdlet Set-AzureServiceAntimalwareExtension Antimalware con l'opzione di monitoraggio via come documentazione al <http://msdn.microsoft.com/library/azure/dn771718.aspx>

È possibile visualizzare gli eventi Antimalware esaminando la tabella WADWindowsEventLogsTable nell'account di archiviazione Azure configurati per abilitare il monitoraggio Antimalware. Può essere utile per convalidare che la raccolta degli eventi Antimalware funzioni, tra cui guida approfondita dell'integrità del servizio Antimalware. Per ulteriori informazioni, incluso il codice di esempio su come estrarre Antimalware eventi dal proprio account di archiviazione, fare riferimento [all'Antimalware per Azure servizi Cloud Microsoft e macchina virtuale - esempi di codice](http://aka.ms/amazsamples "Antimalware per Azure servizi Cloud Microsoft e macchina virtuale - esempi di codice").
