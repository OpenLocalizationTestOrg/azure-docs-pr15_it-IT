<properties 
    pageTitle="Inoltro eccezioni | Microsoft Azure"
    description="Elenco di eccezioni di inoltro e le soluzioni consigliate."
    services="service-bus"
    documentationCenter="na"
    authors="jtaubensee"
    manager="timlt"
    editor="tysonn" />
<tags 
    ms.service="service-bus"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="na"
    ms.date="10/28/2016"
    ms.author="jotaub" />

# <a name="relay-exceptions"></a>Eccezioni di inoltro

In questo articolo vengono elencate alcune eccezioni generate da Microsoft Azure inoltro API. Questo riferimento è soggetta a modifiche, quindi per gli aggiornamenti.

## <a name="exception-categories"></a>Categorie di eccezione

API inoltro generare eccezioni che possono rientrare nelle categorie seguenti, con l'azione associata che è possibile eseguire per provare a correggerli.

1.  Utenti di codice di errore ([ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx), [InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx) [System. OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx), [SerializationException](https://msdn.microsoft.com/library/system.runtime.serialization.serializationexception.aspx)). Azione generale: provare per risolvere il codice prima di continuare.

2.  Errore di installazione/configurazione ([Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingentitynotfoundexception.aspx), [UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx). Azione generale: rivedere la configurazione e modificare, se necessario.

3.  Eccezioni temporanee ([Microsoft.ServiceBus.Messaging.MessagingException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.aspx), [Microsoft.ServiceBus.Messaging.ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx) [Microsoft.ServiceBus.Messaging.MessagingCommunicationException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingcommunicationexception.aspx)). Azione generale: ripetere l'operazione o informare gli utenti.

4.  Altre eccezioni ([System.Transactions.TransactionException](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx) [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx), [Microsoft.ServiceBus.Messaging.MessageLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagelocklostexception.aspx), [Microsoft.ServiceBus.Messaging.SessionLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sessionlocklostexception.aspx)). Azione generale: Specifica il tipo di eccezione. Fare riferimento alla tabella nella sezione seguente. 

## <a name="exception-types"></a>Tipi di eccezione

Nella tabella seguente sono elencati i tipi di eccezione messaggistica e loro cause e azione consigliata note che è possibile eseguire.

| **Tipo di eccezione**                                                                                                                                                                                                                                                                                | **Descrizione/causa/esempi**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | **Azione consigliata**                                                                                                                                                                                                                                                                                                                                                                                                          | **Nota sul tentativi automatico/immediati**                                                                                             |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx)                                                                                                                                                                                                           | Il server non ha risposto all'operazione richiesta nell'intervallo di tempo specificato controllato dal [OperationTimeout](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout.aspx). Il server potrebbe avere completato l'operazione. Questo problema può verificarsi a causa di rete o altri ritardi infrastruttura.                                                                                                                                                                                                                                                                   | Controllare lo stato di sistema per la coerenza e riprovare se necessario. Vedere [eccezioni di Timeout](#timeoutexception).                                                                                                                                                                                                                                                                                                                                                           | Riprova potrebbe essere utile in alcuni casi; aggiungere logica di ripetizione al codice.                                                                      |
| [InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx)                                                                                                                                                                                         | L'operazione utente richiesto non è consentita all'interno del server o servizio. Il messaggio dell'eccezione per informazioni dettagliate, vedere. Ad esempio, [completa](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.brokeredmessage.complete.aspx) genererà questa eccezione se il messaggio è stato ricevuto in modalità **ReceiveAndDelete** .                                                                                                                                                                                                                                                                                                     | Controllare il codice e la documentazione. Verificare che l'operazione è valida.                                                                                                                                                                                                                                                                                                                                         | Tentativo non sarà più semplice.                                                                                                          |
| [Evento OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx)                                                                                                                                                                                       | Si tenta di richiamare un'operazione su un oggetto che è già stato chiuso, interrotta o eliminato. Raramente, questa transazione è già stata eliminata.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Selezionare il codice e assicurarsi che non richiama operazioni su un oggetto eliminato.                                                                                                                                                                                                                                                                                                                                          | Tentativo non sarà più semplice.                                                                                                          |
| [UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx)                                                                                                                                                                                     | L'oggetto [TokenProvider](https://msdn.microsoft.com/library/azure/microsoft.servicebus.tokenprovider.aspx) Impossibile acquisire un token, il token è valido o il token non contiene crediti necessari per eseguire l'operazione.                                                                                                                                                                                                                                                                                                                                                                                                  | Verificare che il provider di token viene creato con i valori corretti. Verificare la configurazione del servizio controllo di accesso.                                                                                                                                                                                                                                                                                                   | Riprova potrebbe essere utile in alcuni casi; aggiungere logica di ripetizione al codice.                                                                      |
| [ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx)<br /> [ArgumentNullException](https://msdn.microsoft.com/library/system.argumentnullexception.aspx)<br />[ArgumentOutOfRangeException](https://msdn.microsoft.com/library/system.argumentoutofrangeexception.aspx) | Uno o più argomenti al metodo non sono validi.<br /> URI fornito [NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) o [Crea](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx) contiene ai segmenti di percorso.<br /> Lo schema URI fornito [NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) o [Crea](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx) non è valido. <br />Il valore della proprietà è maggiore di 32KB. | Selezionare il codice chiamante e assicurarsi che gli argomenti siano corretti.                                                                                                                                                                                                                                                                                                                                                           | Tentativo non sarà più semplice.                                                                                                          |
| [ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx)                                                                                                                                                                       | Servizio non è possibile elaborare la richiesta al momento.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Client possibile attendere per un periodo di tempo e quindi ripetere l'operazione.                                                                                                                                                                                                                                                                                                                                                           | Client tentativi dopo aver determinato intervallo. Se un nuovo tentativo genera un'eccezione diversa, controllare il comportamento di tentativi di tale eccezione. |
| [QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx)                                                                                                                                                                 | L'entità messaggistica raggiunta la dimensione massima consentita.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Creare spazio nell'entità mediante la ricezione di messaggi dall'entità o code secondari. Vedere [QuotaExceededException](#quotaexceededexception).                                                                                                                                                                                                                                                                                                                                      | Se i messaggi sono stati rimossi nel frattempo, potrebbe essere utile Riprova.                                                               |
| [MessageSizeExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagesizeexceededexception.aspx)                                                                                                                                                     | Un payload del messaggio supera il limite di 256 KB. Si noti che la dimensione dei messaggi che può includere proprietà-sistema e il sovraccarico di .NET è il limite di 256 KB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Ridurre le dimensioni di payload del messaggio, quindi ripetere l'operazione.                                                                                                                                                                                                                                                                                                                                                         | Tentativo non sarà più semplice.                                                                                                          |

## <a name="quotaexceededexception"></a>QuotaExceededException

[QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx) indica che è stata superata una quota per un'entità specifica.

Per l'inoltro, questa eccezione vada a capo il [System.ServiceModel.QuotaExceededException](https://msdn.microsoft.com/library/system.servicemodel.quotaexceededexception.aspx), che indica che è stato superato il numero massimo di listener per l'endpoint. In questo caso il valore di **MaximumListenersPerEndpoint** del messaggio dell'eccezione.

## <a name="timeoutexception"></a>TimeoutException 

Un [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx) indica che è in corso più di timeout dell'operazione un'operazione avviata dall'utente. 

Controllare il valore della proprietà [ServicePointManager. DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit) , come raggiungere questo limite possono inoltre causa un' [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx).

Per l'inoltro, si potrebbero ricevere eccezioni di timeout durante l'apertura prima di tutto una connessione di mittente inoltro. Esistono due cause comuni per questa eccezione:

1. Il valore di [OpenTimeout](https://msdn.microsoft.com/library/wcf.opentimeout.aspx) potrebbe essere troppo piccolo (anche una frazione di secondo).
2. Listener(s) di inoltro locale potrebbe non essere risponde (o che si verifichino problemi di regole firewall divieto listener accettare nuove connessioni client) e il valore di [OpenTimeout](https://msdn.microsoft.com/library/wcf.opentimeout.aspx) è minore di circa 20 secondi.

Per esempio:

```
'System.TimeoutException’: The operation did not complete within the allotted timeout of 00:00:10. The time allotted to this operation may have been a portion of a longer timeout.
```

### <a name="common-causes"></a>Cause più comuni

Esistono due cause comuni per questo errore: configurazione non corretta o un errore temporaneo del servizio.

1. **Configurazione non corretta** 
    il timeout dell'operazione potrebbe essere troppo piccolo per la condizione operativa. Il valore predefinito per il timeout dell'operazione nel client SDK è 60 secondi. Verificare se il codice è presente il valore impostato su un valore troppo piccolo. Si noti che la condizione della rete e l'utilizzo della CPU possa influenzare il tempo che necessario per una determinata operazione al completamento, in modo che il timeout dell'operazione non deve essere impostato su un valore molto basso.

2. **Errore servizio temporaneo** 
    talvolta inoltro possono verificarsi ritardi durante l'elaborazione delle richieste; ad esempio durante i periodi di traffico elevato. In tal caso, è possibile ripetere l'operazione dopo un ritardo, fino a quando l'operazione ha esito positivo. Se la stessa operazione non riesce comunque dopo più tentativi, visitare il [sito di stato del servizio Azure](https://azure.microsoft.com/status/) per verificare se i problemi dei servizi.

## <a name="next-steps"></a>Passaggi successivi:

- [Inoltro domande frequenti](relay-faq.md)
- [Creare uno spazio dei nomi](relay-create-namespace-portal.md)
- [Guida introduttiva a .NET](relay-hybrid-connections-dotnet-get-started.md)
- [Guida introduttiva a nodo](relay-hybrid-connections-node-get-started.md)